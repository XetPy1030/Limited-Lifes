# Limited Lifes

Хардкорный Fabric-мод для Minecraft, где у каждого игрока ограниченный запас жизней.  
Каждая смерть уменьшает запас сердец, усложняет выживание и повышает цену ошибок.

## Что делает мод

- Ограничивает число жизней игрока (по умолчанию: `1..10`).
- Уменьшает максимум здоровья в зависимости от числа жизней.
- Показывает обратную связь в action bar и сообщениях игроку.
- Добавляет ритуал восстановления жизни через алтарь и дорогие ресурсы.
- Вводит хардкор-режим на минимуме жизней (`debt_mode`) с постоянным давлением дебаффами.
- Выдаёт короткий бафф "последний шанс" на 1 сердце после респавна.

## Ключевые механики

### Смерть и жизни

- При смерти игрок теряет 1 жизнь.
- Жизни зажимаются в диапазоне `MIN_LIVES..MAX_LIVES`.
- Максимум HP пересчитывается как `lives * 2.0`.

### Ритуал восстановления

- По умолчанию алтарь: `minecraft:enchanting_table`.
- Чтобы не ломать ванильное зачарование:
  - обычный ПКМ по чар-столу открывает интерфейс зачарования;
  - ритуал активируется только при `Shift + ПКМ`.
- Дополнительный катализатор для активации ритуала: в основной руке должен быть `Totem of Undying`.
- Стоимость по умолчанию за +1 сердце:
  - `1x Totem of Undying`
  - `8x Diamond Block`
  - `20` уровней опыта
- Кулдаун ритуала по умолчанию: `1200` тиков (60 секунд).

### Модификаторы сложности

Чем меньше жизней, тем сильнее штрафы:

- `5-4` сердец: лёгкий голод.
- `3-2` сердец: более сильный голод, слабость, замедление добычи.
- `1` сердце: усиленный пакет дебаффов.

### Debt mode (хардкор-финал по умолчанию)

- На минимуме жизней включается `debt_mode`.
- Игрок остаётся в мире, но находится под тяжёлыми постоянными дебаффами.
- Снятие этого состояния предусмотрено через ритуальное восстановление жизни.

### Последний шанс

- Если игрок респавнится на 1 сердце, он получает кратковременный бафф:
  - `Resistance`
  - `Speed`
- Длительность по умолчанию: `300` тиков (15 секунд).

## Команды

Требуются права оператора.

- ` /lives` — показать свои жизни (для источника-игрока).
- ` /lives <target>` — показать жизни выбранного игрока (удобно для консоли/админа).
- ` /lives set <target> <value>` — установить жизни игроку вручную.

## Требования

- Minecraft: `1.21.11`
- Fabric Loader: `>=0.18.4`
- Fabric API: `0.141.3+1.21.11`
- Java: `21+`

## Установка на сервер

1. Установить Fabric Loader нужной версии.
2. Положить собранный `.jar` мода в папку `mods`.
3. Убедиться, что установлен Fabric API.
4. Запустить сервер.

## Разработка

```bash
./gradlew build
./gradlew runServer
./gradlew runClient
```

Для быстрой проверки компиляции:

```bash
./gradlew compileJava
```

## Конфиг и хранение данных

Мод хранит состояние в `SavedData` мира:

- жизни игроков (`PlayerLivesStore`);
- параметры хардкор-механик (`HardcoreConfig`).

Текущие дефолтные параметры задаются в коде (`HardcoreConfig`) и автоматически сериализуются в данные мира.

## Локализация

Поддерживаются:

- `ru_ru`
- `en_us`

Ключи сообщений находятся в:

- `src/main/resources/assets/limited-lifes/lang/ru_ru.json`
- `src/main/resources/assets/limited-lifes/lang/en_us.json`

## Планы по развитию

- Команды для редактирования `HardcoreConfig` прямо в игре.
- Более гибкие режимы финала (`ban`, `spectator`, `prison`) с полным поведением.
- Отдельные сценарии ритуалов и настраиваемая экономика восстановления.
